CREATE DATABASE chubbseguros; --crea la base da tos
GO

USE chubbseguros;--usa la base datos

--creacion de las tablas en ingreso de datos


CREATE TABLE SEGUROS (
    IDSEGURO INT IDENTITY(1,1) PRIMARY KEY,
    NMBRSEGURO VARCHAR(75) NOT NULL,
    CODSEGURO VARCHAR(10) NOT NULL UNIQUE,
    SUMASEGURADA DECIMAL(10,2) NOT NULL,
    PRIMA DECIMAL(10,2) NOT NULL,
	EDADMIN INT NOT NULL,
	EDADMAX INT NOT NULL,
);


INSERT INTO SEGUROS (NMBRSEGURO, CODSEGURO, SUMASEGURADA, PRIMA, EDADMIN, EDADMAX)
VALUES 
('Gastos Medicos Mayores', 'GMYS432000', 50000.00, 65.50, 30, 64),

('Accidentes Personales', 'ADPR321000', 25000.00, 15.00, 18, 70),

('Seguro de vida personal', 'SVPL543000', 100000.00, 35.00, 18, 55),

('Seguro de Hogar y contenidos', 'SGRC765000', 150000.00, 22.50, 22, 99),

('Seguro Viajes', 'SRVJ987000', 30000.00, 25.00, 20, 70),

('Seguro Dental', 'SGDT433000', 3000.00, 15.00, 12, 60);


CREATE TABLE ASEGURADOS (
    IDASEGURADOS INT IDENTITY(1,1) PRIMARY KEY,
    CEDULA VARCHAR(10) NOT NULL UNIQUE,
    NMBRCOMPLETO VARCHAR(75) NOT NULL,
    TELEFONO VARCHAR(10) NULL,
    EDAD INT NOT NULL
);


INSERT INTO ASEGURADOS (CEDULA, NMBRCOMPLETO, TELEFONO, EDAD)
VALUES 
('0914526845', 'ANGEL DAVID VERGARA PAREDES', '0948548788', 25)


CREATE TABLE USRASEGURADOS (
    IDUSRSEGUROS INT IDENTITY(1,1) PRIMARY KEY,
    CEDULAFK VARCHAR(10) NOT NULL,
    CODSEGUROFK VARCHAR(10) NOT NULL,
    FECHACONTRATASEGURO DATE NOT NULL DEFAULT GETDATE(),
    FOREIGN KEY (CEDULAFK) REFERENCES ASEGURADOS(CEDULA),
    FOREIGN KEY (CODSEGUROFK) REFERENCES SEGUROS(CODSEGURO)
);


INSERT INTO USRASEGURADOS (CEDULAFK, CODSEGUROFK)
VALUES 
('0948451111','SRVJ987000')